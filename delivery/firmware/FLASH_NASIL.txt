# FIRMWARE YÃœKLEME TALÄ°MATLARI

## Gerekli YazÄ±lÄ±m

**PlatformIO CLI** (Ã–nerilen - En Kolay YÃ¶ntem)

Otomatik kurulum: `pip install platformio`

Alternatifler:
- ESP32 Flash Download Tool (Espressif)
- esptool (komut satÄ±rÄ±)

---

## YÃ–NTEM 1: PlatformIO Upload (En Kolay - Ã–nerilen)

### AdÄ±m 1: AracÄ± Ä°ndir ve AÃ§
1. YukarÄ±daki linkten `flash_download_tool_vX.X.X.zip` indir
2. Zip'i aÃ§
3. `flash_download_tool_vX.X.X.exe` dosyasÄ±nÄ± Ã§alÄ±ÅŸtÄ±r

### AdÄ±m 2: Chip Tipi SeÃ§
- **ChipType:** ESP32-S3
- **WorkMode:** Develop
- **LoadMode:** UART
- "OK" butonuna bas

### AdÄ±m 3: Firmware SeÃ§
1. Soldaki checkbox'u iÅŸaretle
2. "..." butonuna basÄ±p `vakitmatik_v1.0.bin` dosyasÄ±nÄ± seÃ§
3. Adres kÄ±smÄ±na: **0x10000** yaz (Ã¶nemli!)

### AdÄ±m 4: Port AyarlarÄ±
- **COM:** ESP32'nin takÄ±lÄ± olduÄŸu port (AygÄ±t YÃ¶neticisi'nden bak)
  - Ã–rnek: COM3, COM4, vs.
- **BAUD:** 921600 (hÄ±zlÄ± yÃ¼kleme iÃ§in)

### AdÄ±m 5: Flash Et
1. ESP32-S3'Ã¼ USB'ye tak
2. **START** butonuna bas
3. "FINISH" yazÄ±sÄ±nÄ± bekle (30-60 saniye)
4. **TamamlandÄ±!** ESP32'yi Ã§Ä±kar ve tak (reset)

---

## YÃ–NTEM 2: Sadece .bin DosyasÄ± YÃ¼kle (Firmware HazÄ±rsa)

### Ne Zaman KullanÄ±lÄ±r?
- Kod deÄŸiÅŸikliÄŸi yapmayacaksan
- Sadece hazÄ±r .bin dosyan varsa
- PlatformIO projesine ihtiyacÄ±n yoksa

### AdÄ±m 1: .bin DosyasÄ±nÄ± Bul
EÄŸer `pio run` yaptÄ±ysan:
```
.pio\build\esp32-s3-devkitc-1\firmware.bin
```

### AdÄ±m 2: esptool ile YÃ¼kle
```bash
pip install esptool
esptool.py --chip esp32s3 --port COM3 write_flash 0x10000 firmware.bin
```

**Not:** COM3 yerine kendi portunu yaz (AygÄ±t YÃ¶neticisi'nden bakabilirsin).

---

## YÃ–NTEM 3: ESP Flash Download Tool (GUI - Windows)

### AdÄ±m 1: AracÄ± Ä°ndir
https://www.espressif.com/en/support/download/other-tools

### AdÄ±m 2: AyarlarÄ± Yap
- ChipType: ESP32-S3
- Firmware: `firmware.bin` @ adres `0x10000`
- COM port seÃ§
- BAUD: 921600

### AdÄ±m 3: START Bas
YÃ¼kleme 30-60 saniye sÃ¼rer.

---

## YÃ–NTEM 4 (ESKÄ°): esptool (Ä°leri Seviye - Komut SatÄ±rÄ±)

### Kurulum
```bash
pip install esptool
```

### Flash Komutu
```bash
esptool.py --chip esp32s3 --port COM3 --baud 921600 write_flash 0x10000 vakitmatik_v1.0.bin
```

**Not:** `COM3` yerine kendi port numaranÄ± yaz.

---

## SORUN GÄ°DERME

### "Timed out waiting for packet header" HatasÄ±
**Ã‡Ã¶zÃ¼m:** ESP32'yi BOOT moduna al
1. ESP32'deki "BOOT" butonuna bas ve tut
2. "RST" butonuna bir kez bas
3. "BOOT" butonunu bÄ±rak
4. Tekrar flash et

### COM Port GÃ¶rÃ¼nmÃ¼yor
**Ã‡Ã¶zÃ¼m:** USB Driver kurulumu gerekebilir
1. CP210x driver indir: https://www.silabs.com/developers/usb-to-uart-bridge-vcp-drivers
2. Kur ve bilgisayarÄ± yeniden baÅŸlat
3. ESP32'yi takÄ±nca COM port gÃ¶rÃ¼necek

### Flash BaÅŸarÄ±lÄ± Ama Ekran BoÅŸ
**Kontrol Et:**
1. GÃ¼Ã§ kaynaÄŸÄ± baÄŸlÄ± mÄ±? (5V 60A)
2. Paneller doÄŸru kablolu mu?
3. Serial Monitor'de hata mesajÄ± var mÄ±?
   - 115200 baud rate ayarla
   - ESP32'yi reset et
   - Hata mesajlarÄ±nÄ± Veysel'e gÃ¶nder

---

## Ä°LK Ã‡ALIÅTIRMA

Flash baÅŸarÄ±lÄ± olduktan sonra:

1. **GÃ¼Ã§ KaynaÄŸÄ±nÄ± AÃ§** (5V 60A)
2. **ESP32'yi Reset Et** (RST butonu veya USB Ã§Ä±kar-tak)
3. **Ä°lk Test Pattern'i GÃ¶r:**
   - KÄ±rmÄ±zÄ± ekran (2 sn)
   - YeÅŸil ekran (2 sn)
   - Mavi ekran (2 sn)
4. **Vakitler GÃ¶rÃ¼nsÃ¼n:**
   ```
   12:45    25 Åubat
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Ä°MSAK    05:30
   GÃœNEÅ    07:15
   Ã–ÄLE     12:45
   Ä°KÄ°NDÄ°   15:30
   AKÅAM    18:00
   YATSI    19:45
   ```

---

## GÃœNCELLEME

Yeni firmware versiyonu geldiÄŸinde:

1. Eski .bin dosyasÄ±nÄ± yedekle
2. Yeni .bin dosyasÄ±nÄ± aynÄ± yÃ¶ntemle flash et
3. Ayarlar sÄ±fÄ±rlanabilir (yeniden ayarlama gerekebilir)

---

## SERÄ°AL MONITOR Ä°LE DEBUG

Sorun yaÅŸÄ±yorsan serial monitor'de mesajlarÄ± gÃ¶rebilirsin:

**PlatformIO:**
```bash
pio device monitor --baud 115200
```

**Arduino IDE:**
- Tools â†’ Serial Monitor
- Baud rate: 115200

**esptool:**
```bash
esptool.py monitor --port COM3 --baud 115200
```

---

## Ä°LETÄ°ÅÄ°M

Flash sÄ±rasÄ±nda sorun yaÅŸarsan:

ğŸ“§ Email: [email]  
ğŸ“± WhatsApp: [telefon]  
ğŸ’» GitHub: https://github.com/veyselka/Vakitmatik-P4-LED

Ekran gÃ¶rÃ¼ntÃ¼leri ve hata mesajlarÄ±nÄ± gÃ¶nder, Ã§Ã¶zelim!

---

**HazÄ±rlayan:** Veysel Karani KÄ±lÄ±Ã§erkan  
**GÃ¼ncelleme:** 29 Åubat 2026
